<html>
<head></head>
<body>
  <h1>Members:</h1>
  <ul style="float:left;">
    <li>Alexander Novotny</li>
    <li>Corey Pena</li>
    <li>Sharon Phillips</li>
    <li>Jaime Parra-Alvarez</li>
  </ul>
  
  <form style="float:left;margin-left:50px">
    <span style="font-weight:bold;">Contact us:</span><br>
    Subject: <input type="text" name="subject" id="subject" style="width:350px;margin-left:20px;" pattern="/^{1,0}$/"><br>
    From: <input type="email" name="from" id="from" pattern="^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i" style="width:350px;margin-left:32px;margin-top:10px;margin-bottom:10px;"><br>
    <span style="float:left">Content:</span> <textarea id="content" style="width:400px;height:200px;margin-left:21px;float:right;" pattern="/^{1,0}$/"></textarea><br>
    <div style="clear:both"></div>
    <input type="submit" name="send" id="send" value="Send" style="float:right;margin:7px;">
    <span id="errorSpan" style="color:red;float:right;margin:7px;"></span>
  </form>

  <div style="clear:both"></div>
  <a href="https://docs.google.com/document/d/1Aj3fp8QWXLQRRn3g9tQr0kwzdLheQVwt7RJfu8zvo0c/edit?usp=sharing">Project Document</a>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script>
    var members = ["Alexander Novotny", "Corey Pena", "Sharon Phillips", "Jaime Parra-Alvarez"];
    var emails = ["alexander_novo@mail.tmcc.edu", "CoreyPena@gmail.com", "Sharonaphillips61@gmail.com", "pckillagoku@gmail.com"];

    $(document).ready(function() {
      $("#send").submit(onFormSubmit);
    });

    function onFormSubmit(e) {
      var subject = $("#subject").val();
      var from = $("#from").val();
      var content = $("#content").val();

      if(subject == "") {
        $("#errorSpan").text("There needs to be a subject!");
        return;
      }
      if(from == "") {
        $("#errorSpan").text("There needs to be a sender!");
        return;
      }
      if(content == "") {
        $("#errorSpan").text("There needs to be content!");
        return;
      }

      var re = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i; //E-mnail regex
      if(!re.test(from)) {
        $("#errorSpan").text("That e-mail is not valid!");
        return;
      }

      $("#errorSpan").text("");

      var to = [];
      for(var member in members) {
        to[member] = {
          email: emails[member],
          name: members[member],
          type: "to"
        };
      }

      $.ajax({
        type: "POST",
        url: "https://mandrillapp.com/api/1.0/messages/send.json",
        data: {
          'key': 'XGC63WW2JNXqMwyEswTUxA',
          'message': {
            'from_email': from,
            'to': to,
            'autotext': "true",
            'subject': subject,
            'html': content
          }
        }
      }).done(function(response) {
        console.log(response);
      });
    }
  </script>
</body>
</html>
